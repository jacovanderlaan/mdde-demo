# Generated by MDDE

version: 2

models:
  - name: dim_customer
    description: Customer master data with tier classification
    config:
      tags: ['master_data', 'pii', 'scd2']
    columns:
      - name: customer_sk
        description: Surrogate key
        tests:
          - unique
          - not_null

      - name: customer_id
        description: Unique identifier for the customer
        tests:
          - not_null

      - name: customer_name
        description: Full name of the customer
        tests:
          - not_null

      - name: email
        description: Primary email address
        meta:
          pii_classification: email

      - name: signup_date
        description: Date when customer registered
        tests:
          - not_null

      - name: tier
        description: Loyalty tier classification
        tests:
          - not_null
          - accepted_values:
              values: ['BRONZE', 'SILVER', 'GOLD', 'PLATINUM']

      - name: country
        description: Customer country code

      - name: is_current
        description: Flag indicating current record in SCD2
        tests:
          - not_null
          - accepted_values:
              values: [true, false]

  - name: fact_order
    description: Order header with status and payment information
    config:
      tags: ['transactional', 'fact']
    columns:
      - name: order_id
        description: Unique identifier for the order
        tests:
          - unique
          - not_null

      - name: customer_id
        description: Reference to customer who placed the order
        tests:
          - not_null
          - relationships:
              to: ref('dim_customer')
              field: customer_id

      - name: status
        description: Current status of the order
        tests:
          - accepted_values:
              values: ['PENDING', 'CONFIRMED', 'SHIPPED', 'DELIVERED', 'COMPLETED', 'CANCELLED']
