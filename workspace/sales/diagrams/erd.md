# Sales Model - Entity Relationship Diagram

Generated by MDDE Lite

```mermaid
erDiagram
    CUSTOMERS ||--o{ ORDERS : places
    CUSTOMERS {
        int customer_id PK
        string customer_name
        string email
        string phone
        string country
        string tier
        timestamp created_at
        timestamp updated_at
    }

    ORDERS ||--o{ ORDER_SUMMARY : "aggregated in"
    ORDERS {
        int order_id PK
        int customer_id FK
        date order_date
        string status
        string payment_method
        decimal subtotal
        decimal tax_amount
        decimal shipping_amount
        decimal total_amount
        string currency
    }

    PRODUCTS {
        int product_id PK
        string product_name
        int category_id FK
        decimal unit_price
        boolean is_active
    }

    ORDER_SUMMARY {
        int customer_id PK
        string customer_name
        string tier
        int order_count
        decimal total_revenue
        decimal avg_order_value
        date first_order_date
        date last_order_date
        int customer_lifetime_days
    }
```

## Data Flow

```
┌─────────────────┐     ┌─────────────────┐
│  raw_customers  │     │   raw_orders    │
│    (Source)     │     │    (Source)     │
└────────┬────────┘     └────────┬────────┘
         │                       │
         ▼                       ▼
┌─────────────────┐     ┌─────────────────┐
│    customers    │     │     orders      │
│   (Cleaned)     │     │   (Filtered)    │
└────────┬────────┘     └────────┬────────┘
         │                       │
         └───────────┬───────────┘
                     │
                     ▼
            ┌─────────────────┐
            │  order_summary  │
            │  (Aggregated)   │
            └─────────────────┘
```

## Lineage Summary

| Target Entity | Source Entities | Transformation |
|---------------|-----------------|----------------|
| customers | raw_customers | Filter active only |
| orders | raw_orders | Filter 2024+ |
| order_summary | customers, orders | Aggregate by customer |
